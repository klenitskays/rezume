<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Video</title>
        <link rel="stylesheet" href="videoaudio.css">
    </head>

    
    <body>
    	<div id="video_div">
	    	<video id="video" src="vinni.mp4" width="500" height="400" preload="metadata"></video>
			<div class="buttons">
				<div>
					<img src="icons8-voice-50.png" class="volume_stop" id="volume_stop">
                    <input class="volume_set rangeVolume" type="range" step="0.1" min="0" max="1" value="0.5" id="volume" />
				</div>
                <div class="buttons_play">
                    <div class="but">
        				<img src="icons8-rewind-50.png" class="back_span" id="back">
        				<img src="icons8-play-50.png" class="play_span" id="play">
        				<img src="icons8-fast-forward-50.png" class="next_span" id="next">
                    </div>
    				<img src="icons8-expand-48.png" class="full_span" id="full">
                </div>
		    </div>
            <div class="buttons">
		        <p id="timer">00:00</p>
				<input type="range" class="rangeTime" id="range" value="0">
            </div>
            <div class="buttons playbackRate">
                <button id="slower">slower</button>
                <button id="faster">faster</button>
                <span id="playbackRate"></span>
            </div>
    	</div>



        <script type="text/javascript">
        	const video = document.getElementById("video");

			const rangeTime = document.querySelector(".rangeTime");
			rangeTime.max = video.duration;
			rangeTime.min = 0;
			rangeTime.oninput = function(){
				video.currentTime = rangeTime.value;
			}

        	const playbackRate = document.getElementById("playbackRate");
			playbackRate.innerText = video.playbackRate;

        	document.getElementById("volume_stop").onclick = function (){
        		if (video.muted) {  
			        video.muted = false;
        			this.src = "icons8-voice-50.png";
			    } else {
			        video.muted = true;
        			this.src = "icons8-no-audio-50.png";
			    }
        	}

        	document.getElementById("play").onclick = function (){
        		if (video.paused) {  // если видео остановлено, запускаем
    			    video.play();
        			this.src = "icons8-pause-50.png";
			    } else {
			        video.pause();
        			this.src = "icons8-play-50.png";
			    }
        	}

        	document.getElementById("slower").onclick = function (){
        		if (video.playbackRate <= 0) {  // если видео остановлено, запускаем
    			    video.playbackRate = 1;
			    } else {
			        video.playbackRate -= 1;
			    }
			    playbackRate.innerText = video.playbackRate;
        	}

        	document.getElementById("faster").onclick = function (){
        		if (video.playbackRate >= 10) {  // если видео остановлено, запускаем
    			    video.playbackRate = 1;
			    } else {
			        video.playbackRate += 1;
			    }
			    playbackRate.innerText = video.playbackRate;
        	}

        	document.getElementById("back").onclick = function (){        		
        		video.currentTime -=10;            		
        		if(video.currentTime<0)video.currentTime =0;        		   		
        	}
        	document.getElementById("next").onclick = function (){        		
        		video.currentTime +=10;       
        		if(video.currentTime>video.duration)video.currentTime =video.duration;   		
        	}
        	document.getElementById("full").onclick = function (){        		
        		video.requestFullscreen();        		
        	}





			// получаем все элементы
        var videoEl = document.getElementsByTagName('video')[0],         
            volumeControl = document.getElementById('volume'),
            range = document.getElementById('range'),
            timePicker = document.getElementById('timer');

            volumeControl.value = 1;
         
                 
        range.setAttribute("min", 0);
        range.setAttribute("max", 440.877279);
        console.log(range.getAttribute("min"));
        console.log(range.getAttribute("max"));
        range.addEventListener('input', function () {         
            videoEl.currentTime = range.value;
        }, false);
                 
        volumeControl.addEventListener('input', function () {         
            videoEl.volume = volumeControl.value;
            if(videoEl.volume==0) document.getElementById("volume_stop").src = "icons8-no-audio-50.png";
            else document.getElementById("volume_stop").src = "icons8-voice-50.png";
        }, false);
         
        videoEl.addEventListener('ended', function () {
            videoEl.currentTime = 0;
        }, false);
         
        videoEl.addEventListener('timeupdate', function () {
            timePicker.innerHTML = secondsToTime(videoEl.currentTime);
        }, false);
         
        // рассчет отображаемого времени
        function secondsToTime(time){    
        	if(video.duration==video.currentTime) document.getElementById("play").src = "icons8-reset-48.png";
            range.value = video.currentTime;


            var h = Math.floor(time / (60 * 60)),
                dm = time % (60 * 60),
                m = Math.floor(dm / 60),
                ds = dm % 60,
                s = Math.ceil(ds);
            if (s === 60) {
                s = 0;
                m = m + 1;
            }
            if (s < 10) {
                s = '0' + s;
            }
            if (m === 60) {
                m = 0;
                h = h + 1;
            }
            if (m < 10) {
                m = '0' + m;
            }
            if (h === 0) {
                fulltime = m + ':' + s;
            } else {
                fulltime = h + ':' + m + ':' + s;
            }
            return fulltime;
        }

        </script>
    </body>
</html>